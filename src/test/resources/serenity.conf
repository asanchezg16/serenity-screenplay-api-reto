# ==================================================================================
# SERENITY BDD - CONFIGURATION OPTIMIZADA
# ==================================================================================

serenity {
  logging = verbose
  encoding = "UTF-8"
  tag.failures = "true"
  linked.tags = "issue"
  compress.filenames = true
  take.screenshots = FOR_EACH_ACTION
  console.colors = true

  # Test organization
  test.root = "com.choucair"
  requirements.dir = "src/test/resources/features"

  # Output
  outputDirectory = "target/site/serenity"
  report.accessibility = true
}

# ==================================================================================
# DEFAULT ENVIRONMENT
# ==================================================================================
environment = web.chrome

# ==================================================================================
# ENVIRONMENTS
# ==================================================================================

environments {

  # ================================================================================
  # WEB
  # ================================================================================
  web {
  safari {
    webdriver.driver = safari
    webdriver.base.url = "https://www.saucedemo.com"
  }
  edge {

    webdriver.driver = edge

    webdriver.base.url = "https://www.saucedemo.com"

    webdriver.wait.for.timeout = 10000

    webdriver.capabilities.browserName = "MicrosoftEdge"

    webdriver.capabilities."ms:edgeOptions" {

           args = ["remote-allow-origins=*", "test-type", "no-sandbox", "ignore-certificate-errors", "start-maximized", "incognito", "disable-infobars", "disable-gpu", "disable-default-apps", "disable-popup-blocking"]

    }

  }

    chrome {
      webdriver.driver = chrome
      webdriver.base.url = "https://www.saucedemo.com"
      webdriver.wait.for.timeout = 10000
      webdriver.capabilities.browserName = "chrome"

      webdriver.capabilities."goog:chromeOptions" {
        args = [
          "start-maximized",

        ]
      }
    }
  }

  # ================================================================================
  # API
  # ================================================================================
  api {
    rest.api.baseurl = "https://rickandmortyapi.com/api"
    rest.api.timeout = 30000

    rest.headers {
      "Content-Type" = "application/json"
      "Accept" = "application/json"
    }
  }
}

# ==================================================================================
# WEBDRIVER GLOBAL
# ==================================================================================
webdriver {
  autodownload = true
}
